{"version":3,"sources":["webpack:///./src/components/DailyArticle.vue?38a2","webpack:///./src/components/DailyArticle.vue?2feb","webpack:///./src/directives/time.js","webpack:///src/components/DailyArticle.vue","webpack:///./src/components/DailyArticle.vue?3ea3","webpack:///./src/components/DailyArticle.vue?50d5"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DailyArticle_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_DailyArticle_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","data","title","domProps","innerHTML","body","directives","name","rawName","value","comments","expression","length","_l","comment","key","id","attrs","src","avatar","alt","author","time","content","staticRenderFns","Time","getUnix","date","Date","getTime","getTodayUnix","setHours","setMinutes","setSeconds","setMilliseconds","getYearUnix","setMonth","setDate","getLastDate","month","getMonth","day","getDate","getFullYear","getFormatTime","timestamp","now","today","timer","tip","Math","floor","ceil","bind","el","binding","__timeout__","setInterval","unbind","clearInterval","DailyArticlevue_type_script_lang_js_","props","type","Number","default","[object Object]","methods","util","ajax","get","then","res","replace","imgPath","window","scrollTo","map","watch","val","getArticle","getComments","components_DailyArticlevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/chunk-1609e39a.ee486dfc.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DailyArticle.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DailyArticle.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"daily-article\"},[_c('div',{staticClass:\"daily-article-title\"},[_vm._v(_vm._s(_vm.data.title))]),_c('div',{staticClass:\"daily-article-content\",domProps:{\"innerHTML\":_vm._s(_vm.data.body)}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.comments.length),expression:\"comments.length\"}],staticClass:\"daily-comments\"},[_c('span',[_vm._v(\"评论 \"+_vm._s(_vm.comments.length))]),_vm._l((_vm.comments),function(comment){return _c('div',{key:comment.id,staticClass:\"daily-comment\"},[_c('div',{staticClass:\"daily-comment-avatar\"},[_c('img',{attrs:{\"src\":comment.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"daily-comment-content\"},[_c('div',{staticClass:\"daily-comment-name\"},[_vm._v(_vm._s(comment.author))]),_c('div',{directives:[{name:\"time\",rawName:\"v-time\",value:(comment.time),expression:\"comment.time\"}],staticClass:\"daily-comment-time\"},[_vm._v(_vm._s(comment.time))]),_c('div',{staticClass:\"daily-comment-text\"},[_vm._v(_vm._s(comment.content))])])])})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const Time = {\n  // 获取当前时间戳\n  getUnix: function() {\n    let date = new Date();\n    return date.getTime();\n  },\n  // 获取今天 0 点 0 分 0 秒的时间戳\n  getTodayUnix: function() {\n    let date = new Date();\n    date.setHours(0);\n    date.setMinutes(0);\n    date.setSeconds(0);\n    date.setMilliseconds(0);\n    return date.getTime();\n  },\n\n  // 获取今年 1 月 1 日 0 点 0 分 0 秒的时间戳\n  getYearUnix: function() {\n    let date = new Date();\n    date.setMonth(0);\n    date.setDate(1);\n    date.setHours(0);\n    date.setMinutes(0);\n    date.setSeconds(0);\n    date.setMilliseconds(0);\n    return date.getTime();\n  },\n\n  // 获取标准年月日\n  getLastDate: function(time) {\n    let date = new Date(time);\n    let month =\n      date.getMonth() + 1 < 10\n        ? \"0\" + (date.getMonth() + 1)\n        : date.getMonth() + 1;\n    let day = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\n    return date.getFullYear() + \"-\" + month + \"-\" + day;\n\n    // let value = date.toLocaleDateString();\n    // return value.replace(/\\//g, \"-\"); // 该设置限制在系统时间以斜杠分隔，有缺陷\n  },\n\n  // 转换时间\n  getFormatTime: function(timestamp) {\n    let now = this.getUnix();\n    let today = this.getTodayUnix();\n    let year = this.getYearUnix();\n\n    let timer = (now - timestamp) / 1000; // 转换为妙级时间戳\n    let tip = \"\"; // 使用 switch 语句里，无法读取 tip 遍历\n\n    // switch (true) {\n    //   case timer <= 0:\n    //     tip = \"刚刚\";\n    //     break;\n    //   case timer < 3600:\n    //     tip = Math.floor(timer / 60) + \"分钟前\";\n    //     break;\n    //   case timer >= 3600 && timestamp - today >= 0:\n    //     tip = Math.floor(timer / 3600) + \"小时前\";\n    //     break;\n    //   case timer / 86400 <= 31:\n    //     tip = Math.ceil(timer / 86400) + \"天前\";\n    //     break;\n    //   default:\n    //     tip = this.getLastDate(timestamp);\n    //     break;\n    // }\n\n    if (timer <= 0) {\n      tip = \"刚刚\";\n    } else if (timer < 3600) {\n      tip = Math.floor(timer / 60) + \"分钟前\";\n    } else if (timer >= 3600 && timestamp - today >= 0) {\n      tip = Math.floor(timer / 3600) + \"小时前\";\n    } else if (timer / 86400 <= 31) {\n      tip = Math.ceil(timer / 86400) + \"天前\";\n    } else {\n      tip = this.getLastDate(timestamp);\n    }\n\n    return tip;\n  }\n};\n\nexport default {\n  bind: function(el, binding) {\n    el.innerHTML = Time.getFormatTime(binding.value);\n    el.__timeout__ = setInterval(function() {\n      el.innerHTML = Time.getFormatTime(binding.value);\n    }, 60000);\n  },\n  unbind: function(el) {\n    clearInterval(el.__timeout__);\n    delete el.__timeout__;\n  }\n};\n","\n<template>\n  <div class=\"daily-article\">\n    <div class=\"daily-article-title\">{{ data.title }}</div>\n    <div class=\"daily-article-content\" v-html=\"data.body\"></div>\n    <div class=\"daily-comments\" v-show=\"comments.length\">\n      <span>评论 {{ comments.length }}</span>\n      <div class=\"daily-comment\" v-for=\"comment in comments\" :key=\"comment.id\">\n        <div class=\"daily-comment-avatar\">\n          <img :src=\"comment.avatar\" alt=\"\">\n        </div>\n        <div class=\"daily-comment-content\">\n          <div class=\"daily-comment-name\">{{ comment.author }}</div>\n          <div class=\"daily-comment-time\" v-time=\"comment.time\">{{ comment.time }}</div>\n          <div class=\"daily-comment-text\">{{ comment.content }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport $ from \"../libs/util\";\nimport Time from \"../directives/time\";\nexport default {\n  name: \"daily-article\",\n  directives: { Time },\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      data: {},\n      comments: []\n    };\n  },\n  methods: {\n    getArticle() {\n      $.ajax.get(\"news/\" + this.id).then(res => {\n        // 将文章中的图片地址替换为代理的地址\n        res.body = res.body.replace(/src=\"http/g, 'src=\"' + $.imgPath + \"http\");\n        res.body = res.body.replace(\n          /src=\"https/g,\n          'src=\"' + $.imgPath + \"https\"\n        );\n        this.data = res;\n\n        // 返回文章顶端\n        window.scrollTo(0, 0);\n      });\n    },\n    getComments() {\n      this.comments = [];\n      $.ajax.get(\"story/\" + this.id + \"/short-comments\").then(res => {\n        this.comments = res.comments.map(comment => {\n          // 将头像的图片地址转为代理地址\n          comment.avatar = $.imgPath + comment.avatar;\n          return comment;\n        });\n      });\n    }\n  },\n  watch: {\n    id(val) {\n      if (val) {\n        this.getArticle();\n        this.getComments();\n      }\n    }\n  }\n};\n</script>\n<style>\n.daily-arctile {\n  margin-left: 450px;\n  padding: 20px;\n}\n\n.daily-arctile-title {\n  padding: 10px 0;\n  font-size: 28px;\n  font-weight: bold;\n  color: hsl(0, 0%, 13%);\n}\n\n.view-more a {\n  display: block;\n  padding: 4px 0;\n  border-radius: 3px;\n\n  cursor: pointer;\n  background: hsl(210, 25%, 97%);\n  color: inherit;\n  text-align: center;\n  text-decoration: none;\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DailyArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DailyArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DailyArticle.vue?vue&type=template&id=14008632&\"\nimport script from \"./DailyArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./DailyArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DailyArticle.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"DailyArticle.vue\"\nexport default component.exports"],"sourceRoot":""}